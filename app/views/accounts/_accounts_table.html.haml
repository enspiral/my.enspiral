%table
  %thead
    %th Type
    %th Number of Accounts
    %th Balance
  %tbody
    %tr
      %td Positive
      %td=accounts.select(&:positive?).size
      %td=number_to_currency accounts.select(&:positive?).map(&:balance).sum
    %tr
      %td Negative
      %td=accounts.select(&:negative?).size
      %td=number_to_currency accounts.select(&:negative?).map(&:balance).sum
    %tr
      %td All
      %td=accounts.size
      %td=number_to_currency accounts.map(&:balance).sum


%table.table.table-striped
  %thead
    %tr
      %th Name
      %th Available Balance
      %th Invoiced

  %tbody
    - accounts.each do |account|
      %tr{class: account.closed ? 'filter-inactive' : 'filter-active'}
        %td.text_filter= link_to account.name, [@company, account]
        %td{class: account.positive? ? 'green_ink' : 'red_ink'}= number_to_currency(account.balance)
        %td= number_to_currency(account.pending_total)

